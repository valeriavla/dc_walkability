<!DOCTYPE html>
<meta charset="utf-8">
<body>
    adsadasdasdasdasdads
    <p>
sadadddddddddddddd</p>
sadasdasa
<div>
    AAA
</div>
  <div id="myDiv">
    <button id="myButton">Cars Word Cloud</button>
  </div>

  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="https://rawgit.com/jasondavies/d3-cloud/master/build/d3.layout.cloud.js"></script>

  <script>
    //Based on https://github.com/jasondavies/d3-cloud/blob/master/examples/simple.html
    function wordCloud(div, width=500, height=500) {
      var fill = d3.scale.category20();
      var svg = d3.select(div).append("svg")
                  .attr("width", width)
                  .attr("height", height)
                  .append("g")
                  .attr("transform", "translate(" + width/2 + "," + height/2 + ")");

      function draw(words) {
        var cloud = svg.selectAll("g text")
                       .data(words, function(d) { return d.text; });
        cloud.enter()
             .append("text")
             .style("font-family", "Impact")
             .style("fill", function(d, i) { return fill(i); })
             .attr("text-anchor", "middle")
             .attr('font-size', 1)
             .text(function(d) { return d.text; });

        //Entering and existing words
        cloud.transition()
             .duration(600)
             .style("font-size", function(d) { return d.size + "px"; })
             .attr("transform", function(d) {
               return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
             })
             .style("fill-opacity", 1);

        //Exiting words
        cloud.exit()
             .transition()
             .duration(200)
             .style('fill-opacity', 1e-6)
             .attr('font-size', 1)
             .remove();
      }

      return {
        update: function(words) {
          d3.layout.cloud().size([width, height])
            .words(words)
            .padding(5)
            .rotate(function() { return ~~(Math.random() * 2) * 90; })
            .font("Impact")
            .fontSize(function(d) { return d.size; })
            .on("end", draw)
            .start();
        }
      }
    }

    var myWordCloud = wordCloud('#myDiv', 500, 500);

    var words = ["a b c",
    "x y x",
    "x y x z e"
    ]

    function getWords(i) {
      return words[i]
          .replace(/[!\.,:;\?]/g, '')
          .split(' ')
          .map(function(d) {
              return {text: d, size: 10 + Math.random() * 60};
          })
    }

    function showNewWords(vis, i, updateCallback) {
        i = i || 0;

        vis.update(getWords(i ++ % words.length));
        updateCallback();
    }

    d3.select('#myButton').on('click', function() {
        myWordCloud.update(getWords(Math.floor(Math.random() * words.length)));
    });

    myWordCloud.update(getWords(Math.floor(Math.random() * words.length)));

  </script>
</body>
